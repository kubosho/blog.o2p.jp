<!DOCTYPE html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><html class="no-js"><![endif]--><!--[if (gte IE 9)|!(IE)]<!--><html lang="ja"><!--<![endif]--><head><meta charset="utf-8" /><meta content="kubosho_が日々気づいたことやハマったことを書き残していくブログです。" name="description" /><meta content="article" property="og:type" /><meta content="kubosho_が日々気づいたことやハマったことを書き残していくブログです。" property="og:description" /><meta content="http://blog.o2p.jp/assets/img/ogp.png" property="og:image" /><title>WordPressからGitHub Pages+Middleman+Travis CIに移行したらブログを書く気になれた話 - blog.o2p.jp</title><meta content="WordPressからGitHub Pages+Middleman+Travis CIに移行したらブログを書く気になれた話 - blog.o2p.jp" property="og:title" /><meta content="http://blog.o2p.jp/2013/12/17/wordpress-to-middleman.html" property="og:url" /><meta content="width=device-width" name="viewport" /><meta content="telephone=no" name="format-detection" /><meta content="address=no" name="format-detection" /><meta content="blog.o2p.jp" name="apple-mobile-web-app-title" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><link href="http://blog.o2p.jp/assets/img/favicon.ico" rel="icon" type="image/x-icon" /><link href="http://blog.o2p.jp/assets/img/apple-touch-icon.png" rel="apple-touch-icon-precomposed" /><link href="/assets/css/normalize.css" media="screen" rel="stylesheet" type="text/css" /><link href="/assets/css/main.css" media="screen" rel="stylesheet" type="text/css" /><link href="/assets/css/syntax.css" media="screen" rel="stylesheet" type="text/css" /><link href="http://blog.o2p.jp/feed" rel="alternate" title="blog.o2p.jp RSS(最新記事をお届けします)" type="application/rss+xml" /><script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script><script type="text/javascript">window.jQuery || document.write('<script src="/js/vendor/jquery-1.8.0.min.js"><\/script>')</script><script src="/assets/js/main.js"></script></head><body><script type="text/javascript">var gaOptOutProperty = 'ga-disable-UA-25380313-3';
if (document.cookie.indexOf(gaOptOutProperty + '=true') > -1) {
  window[gaOptOutProperty] = true;
}
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-25380313-3', 'o2p.jp');
ga('send', 'pageview');</script><header role="banner"><h1 class="logo"><a href="/">blog.o2p.jp</a></h1></header><main role="main"><div id="fb-root"></div><script type="text/javascript">(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1";fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><article class="entry"><header class="entry_header"><time class="entry_time" datetime="Tue Dec 17 23:59:00 2013">2013/12/17</time><h1 class="entry_title">WordPressからGitHub Pages+Middleman+Travis CIに移行したらブログを書く気になれた話</h1><ul class="entry_shares"><li class="entry_share"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></li></ul></header><div class="entry_body"><p><a href="http://www.adventar.org/calendars/167">Blog #blogadvent Advent Calendar 2013</a> 17日目の記事です。</p>

<p>かつて、<a href="http://inputxoutput.com/">WordPressでブログを運営</a>していましたが、<a href="http://pages.github.com/">GitHub Pages</a>+<a href="http://middlemanapp.com/">Middleman</a>(<a href="http://middlemanjp.github.io/">日本語</a>)+<a href="https://travis-ci.org/">Travis CI</a>に移行してみたら捗るようになったので、その移行話を書いてみます。</p>

<p>(<a href="https://github.com/o2project/o2project.github.io">ちなみに移行先のリポジトリはこれです</a>)</p>

<h2>なぜ移行したか</h2>

<p>移行した理由ですが、簡潔に言うと「記事を公開するまでの流れを楽にしたかった」ということです。そして実際に移行したことによるメリットが2つあります。</p>

<p>1つめは、記事公開するまでの手順を減らせたことです。例えばWordPressの場合、普段使っているエディタで記事を書いた場合、以下の5つの手間が発生してとても面倒くさいものでした。</p>

<ol>
<li>記事をエディタで書く</li>
<li>ブラウザでWordPressのダッシュボードを開く</li>
<li>投稿から新規追加を押す</li>
<li>タイトルと本文、タグなどにそれぞれ書いた内容をコピペしたり、スラッグを決める</li>
<li>公開ボタンを押す</li>
</ol>

<p>しかしmiddlemanに移行後、手順が以下の通り2つ減り、よりブログの記事を書こうという気になっています。</p>

<ol>
<li>記事をエディタで書く</li>
<li>ターミナルやGitをGUIで扱えるソフト(SourceTree)などを開く</li>
<li>git add . &amp;&amp; git commit &amp;&amp; git push origin master</li>
</ol>

<p>2つめは、普段使っているエディタとmarkdown形式が使えるようになったということです。markdown形式については、<a href="http://wordpress.org/plugins/markdown-on-save/">Markdown on Save</a>というWordPressのプラグインを使っていましたが、プラグインを追加しなくても標準で対応しているというのが良いと思いました。</p>

<p>とはいえメリットだけでなく、GitHub Pages+Middleman+Travis CIの連携がちょっと面倒というデメリットはあります(参考までに、下記の移行までの流れの章で移行にあたって参考にしたサイトを載せています)。</p>

<p>とはいえそれも最初だけで、ブログを書いて公開する時間のほうが移行する準備の時間より長いので、元は取れるかなという感じです。</p>

<h2>移行までの流れ</h2>

<p>MiddlemanのインストールとTravis CIで自動ビルドとGitHubへ自動的にpushする流れを作るのに、<a href="http://tricknotes.hateblo.jp/entry/2013/06/17/020229">Middleman で作った web サイトを Travis + GitHub pages でお手軽に運用する - tricknotesのぼうけんのしょ</a>を参考にしました。</p>

<p>Middlemanの設定については、<a href="https://twitter.com/hokaccha">@hokaccha</a>のブログ、<a href="http://webtech-walker.com/">Webtech Walker</a>の<a href="https://github.com/hokaccha/webtech-walker">リポジトリ</a>を見て参考にしています。</p>

<p>上の2つのリンクと<a href="http://middlemanapp.com/">公式サイト</a>のMiddleman Basicsのリンク先を見れば、インストールから設定まで事足りますが、リンクだけ紹介するのも芸がないので、移行にあたり工夫した点を以下に書いていきます。</p>

<h2>テンプレートファイルをSlimにした</h2>

<p>ERB形式のテンプレートファイルの場合、Rubyをテンプレートファイルの中に組み込みたいという場合に&lt;% ... %&gt;みたいな感じで、いちいち&lt;&gt;や%を書かないといけなかったり、HTMLの要素を書くときにも&lt;と&gt;を打たないといけないというのが面倒だと感じました(HTMLに関してはEmmetを使えばいい話ですが)。</p>

<p>なので、Slim形式にテンプレートを書き換え、config.rbで以下の2行を追記し、Slimを使うようにしています。</p>
<pre class="highlight ruby"><span class="n">set</span> <span class="ss">:markdown</span><span class="p">,</span> <span class="ss">:layout_engine</span> <span class="o">=&gt;</span> <span class="ss">:slim</span>
<span class="n">set</span> <span class="ss">:blog_layout_engine</span><span class="p">,</span> <span class="ss">:slim</span>
</pre>

<h2>URLにyyyy/mm/ddの形式で年月日を含めるようにした</h2>

<p>Middleman固有の話ではないのですが、URLに年月日を含めるようにしました。というのもこのブログで扱うのがWebの技術に関することという以上、更新しない限り情報は古くなります。</p>

<p>そうなった場合、例えば情報を探している人が検索エンジンなどから自分が書いた古くなった情報が載っている記事にアクセスして、かつその情報を参考にしてしまった場合、その時点で正しくない情報に誘導(して|されて)しまったということでお互いもやっとした気持ちになると思います。</p>

<p>なので、そういうことが減るようURLに年月日を含めることで、もしかしたらこの情報は古いかもしれないという事に気づいてくれたらという期待をこめて、URLに年月日を含めるようにしました。</p>

<hr>

<p>ということで、WordPressからMiddlemanに移行したらブログを書く気になれた話でした。これからもここで記事を書けるよう技術的に精進していきたいと思います。</p>
</div></article><ul class="entry_shares"><li class="entry_share"><a class="twitter-share-button" data-lang="ja" data-related="kubosho_" data-via="kubosho_" href="https://twitter.com/share">Tweet</a></li><li class="entry_share"><div class="fb-like" data-action="recommend" data-layout="button_count" data-share="false" data-show-faces="false"></div></li></ul><div id="disqus_thread"></div><p class="back-to-top-page"><a href="/">トップページへ戻る</a></p><script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script><script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'techo2pjp'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript><a href="http://disqus.com/?ref_noscript">Disqus</a>提供のコメント機能を有効にするためにJavaScriptを有効にしてください。<br>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></noscript></main><footer role="contentinfo"><div class="site-info"><p>このブログは、日々気づいた・ハマったことを書き残すブログです。</p><p>記事の内容に間違いがある場合は、記事のコメント欄、または<a href="https://github.com/o2project/o2project.github.io/issues">GitHubのIssues</a>で報告していただけると幸いです。</p></div><div class="site-feed"><a href='http://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fblog.o2p.jp%2Ffeed'  target='blank'><img id='feedlyFollow' src='http://s3.feedly.com/img/follows/feedly-follow-rectangle-flat-big_2x.png' alt='follow us in feedly' width='131' height='56'></a></div><p class="copyright"><small>© 2013-2014 <a href="https://twitter.com/kubosho_">kubosho_</a></small></p></footer></body></html>